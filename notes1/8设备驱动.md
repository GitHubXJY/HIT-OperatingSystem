## 设备驱动——从文件视图到out指令

### 1 设备驱动的基本原理

1. 外部设备和外设管理

完成CPU管理和内存管理后，接下来是外设管理。外部设备就是通常所说的输入输出设备，通过总线和CPU、内存连接在一起。每个外部设备通常都会有自己的控制电路，当想要某个外部设备工作时，CPU会向某个地方写入一段信息，外部设备会解释这段信息并决定要完成什么动作。

外设的工作模式是：CPU通过端口地址发送对外设的工作要求，通常是命令`out ax, 端口号`，其中`ax`寄存器存放让外设工作的具体内容。外设开始工作，工作完成以后使用中断机制告诉CPU，CPU会在中断处理程序中处理外设的工作结果。

为了高效的实现外设管理，操作系统引入了文件视图的概念，将所有外设的使用都统一为对文件视图的使用，给上层用户提供一个统一接口，屏蔽细节，达到方便高效使用的目的。同时在文件视图背后根据外设的各自特定实现缓冲机制、排队调度等方法提高工作效率。

2. 设备驱动的基本原理



### 2

### 3

### 4

### 5

### 6
