# 实验项目1 控制系统启动

## 实验目的

熟悉 hit-oslab 实验环境；建立对操作系统引导启动过程的认识；掌握操作系统的基本开发过程；能对操作系统代码进行简单的控制。

## 实验内容

阅读[参考书籍](../books/) 《操作系统原理、实现与实践》第1章的内容和《Linux 内核完全注释》第6章的内容。

按照要求改写 0.11 的引导程序 bootsect.s 和进入保护模式前设置程序 setup.s。

改写 bootsect.s 主要完成如下功能：

1. 修改目前在屏幕上显示的开机Logo信息，在屏幕上打印："XXX is booting..."，其中"XXX"是给操作系统的名字。

这部分的关键在于修改 bootsect.s 中的 "Loading system..."部分，核心是实践 0x10号 BIOS中断的使用，需要修改显示字符串的内容和相应的参数。

改写 setup.s 主要完成如下功能：

1. bootsect.s 能完成 setup.s 的载入，并跳转到 setup.s 开始地址执行，在开始执行时向屏幕输出一行 "Now we are in SETUP" 信息，表示已经进入了 setup 部分。

要显示 "Now we are in SETUP" 信息，则需要再次调用 0x10号 BIOS中断。

2. setup.s 能获得至少一个基本硬件参数（如内存参数、显卡参数、硬盘参数等），将其存放在内存的特定地址，并输出到屏幕上。

获取硬件参数就是调用相应deBIOS中断，显示信息时需要谨慎，因为返回的硬件信息是 16进制数，需要转换成相应的 ASCII 码信息才能调用 int 0x10 来输出。

3. "setup.s"不再加载 linux 内核，保持上述信息显示在屏幕上停下即可。

这个修改的关键是修改 Makefile 和 build.c。

## 实验流程
